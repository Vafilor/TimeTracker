{% macro user_date(input_date, user) %}
    {{ input_date|date(user.dateFormat, user.timezone) }}
{% endmacro %}

{% macro user_datetime(input_date, user) %}
    {{ input_date|date(user.dateTimeFormat, user.timezone) }}
{% endmacro %}

{% macro user_datetime_today(input_date, user) %}
    {{ input_date|date(user.todayDateTimeFormat, user.timezone) }}
{% endmacro %}

{% macro user_duration(input_duration, user) %}
    {% set format = user.durationFormat %}
    {% if not input_duration.days and 'a' in format  %}
        {% set format = format|replace({'a': 'd'})%}
    {% endif %}

    {{ input_duration|date(format) }}
{% endmacro %}